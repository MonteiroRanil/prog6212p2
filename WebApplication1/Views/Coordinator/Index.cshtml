@model IEnumerable<WebApplication1.Models.LecturerClaim>
@{
    ViewData["Title"] = "Coordinator Dashboard";
}

<div class="min-h-screen bg-gray-50 p-6">
    <div class="max-w-6xl mx-auto bg-white shadow-lg rounded-2xl p-6">
        <h1 class="text-3xl font-semibold text-gray-800 mb-6">Coordinator Dashboard</h1>

        @* Display success/error messages *@
        @if (TempData["Success"] != null)
        {
            <div class="bg-green-100 border border-green-400 text-green-700 px-4 py-3 rounded mb-4">
                @TempData["Success"]
            </div>
        }
        @if (TempData["Error"] != null)
        {
            <div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4">
                @TempData["Error"]
            </div>
        }

        @if (!Model.Any())
        {
            <p class="text-gray-500">No pending claims.</p>
        }
        else
        {
            <div class="space-y-4">
                @foreach (var claim in Model)
                {
                    <div class="p-4 bg-white shadow rounded-lg border border-gray-200">
                        <div class="flex justify-between items-start">
                            <div class="space-y-1">
                                <p><strong>Lecturer:</strong> @claim.User.UserName</p>
                                <p><strong>Total Amount:</strong> @claim.TotalAmount.ToString("C")</p>
                                <p><strong>Hours Worked:</strong> @claim.HoursWorked</p>
                                <p><strong>Notes:</strong> @claim.Notes</p>
                                <p><strong>Submitted At:</strong> @claim.SubmittedAt.ToString("g")</p>
                                <p><strong>Documents:</strong></p>
                                <ul class="list-disc list-inside">
                                    @foreach (var doc in claim.Documents)
                                    {
                                        <li>
                                            <a asp-controller="Documents" asp-action="Download" asp-route-id="@doc.DocumentId" class="text-blue-600 hover:underline">
                                                @doc.FileName
                                            </a>
                                        </li>
                                    }
                                </ul>
                            </div>

                            <div class="flex flex-col space-y-2 ml-4">
                                <form asp-action="Approve" method="post">
                                    <input type="hidden" name="id" value="@claim.ClaimId" />
                                    <button type="submit" class="px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600">Approve</button>
                                </form>

                                <form asp-action="Reject" method="post">
                                    <input type="hidden" name="id" value="@claim.ClaimId" />
                                    <input type="text" name="reason" placeholder="Rejection reason" class="border px-2 py-1 rounded mb-1" required />
                                    <button type="submit" class="px-3 py-1 bg-red-500 text-white rounded hover:bg-red-600">Reject</button>
                                </form>
                            </div>
                        </div>
                    </div>
                }
            </div>
        }
    </div>
</div>
